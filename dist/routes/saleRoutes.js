import { Router } from "express";
import { errorHandler } from "../middlewares/errorHandler.js";
import isAuthenticated from "../middlewares/authenticated.js";
import newSale from "../controllers/sale/newSale.js";
import getSale from "../controllers/sale/getSale.js";
import isSale from "../middlewares/isSale.js";
import getSalesList from "../controllers/sale/getSalesList.js";
import updatePickupStatus from "../controllers/sale/updatePickupStatus.js";
import isAdmin from "../middlewares/isAdmin.js";
import getSalesSummary from "../controllers/sale/getSalesSummary.js";
const saleRouter = Router();
saleRouter.post('/:carId', errorHandler(isAuthenticated), errorHandler(newSale));
saleRouter.get('/summary', errorHandler(isAdmin), errorHandler(getSalesSummary));
saleRouter.get('/:saleId', errorHandler(isAuthenticated), errorHandler(getSale));
saleRouter.get('/', errorHandler(isSale), errorHandler(getSalesList));
saleRouter.put('/pickup/:id', errorHandler(isSale), errorHandler(updatePickupStatus));
export default saleRouter;
